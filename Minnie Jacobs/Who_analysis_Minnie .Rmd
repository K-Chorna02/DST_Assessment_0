---
title: "WHO_analysis"
author: "Minnie"
date: "2025-09-29"
output: html_document
---

We deleted the columns that were irrelevant . 

```{r load}
data=read.csv("who_data.csv")
```

Next, cleaning and filtering larger values that are outside the scale. 
We look at the summary data to get an overview of our data.

```{r summaries}
summary(data)
```
As we can see there are many missing values and some very large ranges. 
First we consider reasons for these spikes, they could be measurement error, extreme pollution events as a consequence of natural disasters
We could cap values to avoid these extreme outliers.
We only include data from 2013 onwards to remove missing data.

```{r pm10} 
#We only include data from 2013 onwards to remove missing data.
data_filtered <- data[data$year >= 2013 & !is.na(data$pm10_concentration) & data$pm10_concentration > 0,
]#removing missing data
library(ggplot2)
library(dplyr)
Spain_data= data_filtered %>%
  filter(country_name=="Spain")

ggplot(Spain_data, aes(x = year, y=pm10_concentration)) + geom_col(fill="blue",color="black")+
labs(title = "pm10_concentration over time in Spain",
x = "Year", y = "Spain_pm10_concentration") 


```
As we can see we have data that is very much out of range, so we create a log column of the data. 
We scale our data as follows:
```{r spain logpm10} 
library(dplyr)
#filtering data to remove missing values and use logged values
filtered_data=data[!is.na(data$pm10_concentration) & data$pm10_concentration > 0, ]
filtered_data$logpm10 <- log(filtered_data$pm10_concentration)
#Filtering by Spain 
Spain_data= filtered_data %>%
  filter(country_name=="Spain")

ggplot(Spain_data, aes(x = year, y=pm10_concentration)) + geom_col(fill="blue",color="black")+
labs(title = "pm10_concentration over time in Spain",
x = "Year", y = "Spain_pm10_concentration") 


```
```{r pm10 UK} 
Germany_data= filtered_data %>%
  filter(country_name=="Germany")

ggplot(Germany_data, aes(x = year, y=pm10_concentration)) + geom_col(fill="blue",color="black")+
labs(title = "pm10_concentration over time in Germany",
x = "Year", y = "Germany_pm10_concentration") 

```

```{r pm10 Germany} 
Germany_data= filtered_data %>%
  filter(country_name=="Germany")

ggplot(Germany_data, aes(x = year, y=pm10_concentration)) + geom_col(fill="blue",color="black")+
labs(title = "pm10_concentration over time in Germany",
x = "Year", y = "Germany_pm10_concentration") 

```

We filter data for 2013 onwards 


```{r pm10 general} 
library(ggplot2)
ggplot(filtered_data, aes(x = year, y=logpm10)) + geom_col(color="black")+
labs(title = "logpm10_concentration over time",
x = "Year", y = "pm10_concentration") 
```
As we can see, this is still too big.

```{r logpm10} 
data$meanpm10= log(data$pm10_concentration)
```



```{r pm25} 
Year=data$year
pm25=data$pm25_concentration
library(ggplot2)
ggplot(data, aes(x = Year, y=pm25)) + geom_col(color="black")+
labs(title = "pm25_concentration over time",
x = "Year", y = "pm25_concentration") +
theme_minimal()
```

```{r no2} 
Year=data$year
no2=data$no2_concentration
library(ggplot2)
ggplot(data, aes(x = Year, y=no2)) + geom_col(color="black")+
labs(title = "N0_2 concentration over time",
x = "Year", y = "N0_2concentration") +
theme_minimal()
```

```{r pm10 temp} 
Year=data$year
pm10_temp=data$pm10_tempcov
library(ggplot2)
ggplot(data, aes(x = Year, y=pm10_temp)) + geom_col(color="black")+
labs(title = "pm10_temp concentration over time",
x = "Year", y = "pm10 temp concentration") +
theme_minimal()
```

```{r pm25 temp} 
Year=data$year
pm25_temp=data$pm25_tempcov
library(ggplot2)
ggplot(data, aes(x = Year, y=pm25_temp)) + geom_col(color="black")+
labs(title = "pm25_temp concentration over time",
x = "Year", y = "pm25 temp concentration") +
theme_minimal()
```

```{r no2 temp} 
Year=data$year
no2_temp=data$no2_tempcov
library(ggplot2)
ggplot(data, aes(x = Year, y=no2_temp)) + geom_col(color="black")+
labs(title = "no2_temp concentration over time",
x = "Year", y = "no2 temp concentration") +
theme_minimal()
```